# prompts_from_file_ex.py
* WebUIに新しいユーザースクリプトを導入します。

## チャンク文字列フォーマット

`prompts_from_file_ex.py` スクリプトは、以下の形式で記述された「チャンク文字列」を処理します。

*   **チャンクの開始**: 各チャンクは行頭が `#` で始まる行で開始します。この行はチャンクのタイトルやカテゴリとして機能します。
*   **複数行プロンプト**: `#` で始まる行の次の行から、次の `#` で始まる行、またはファイルの終わりまでがそのチャンクのプロンプト内容となります。各行は個別のプロンプト要素として扱われ、最終的に結合されます。
*   **タグとワイルドカード**: プロンプトの各行には、コンマ区切りのタグや独自のワイルドカード文字列を含めることができます。
*   **空行の扱い**: チャンク内の空行は無視されます。

**小さな例:**

```
# サンプル
1girl, solo, upper body, looking at another, on chair,
smile, red eyes,
__rating/sfw__, __chara/Lora__,

# 別チャンクの例：カフェ
cafe, 1boy, solo, sitting, reading book,
__chara/some_character/clothing/casual__,
__lighting/daylight__,
```

上記の例では、`# サンプル` と `# 別チャンクの例：カフェ` がそれぞれチャンクの開始を示しています。各チャンク内の複数行が結合され、一つのプロンプトとして処理されます。

## ユーザー用チュートリアル

`prompts_from_file_ex.py` を使用すると、構造化されたプロンプトリストを簡単に生成できます。
webuiのscriptsフォルダ内にスクリプトを入れることで導入は完了します。

### 1. スクリプトの有効化

1.  Stable Diffusion Web UI を起動します。
2.  「txt2img」または「img2img」タブに移動します。
3.  「Scripts」ドロップダウンメニューから「Prompts from file (Extended)」を選択します。

### 2. チャンク文字列の入力

プロンプトを入力する方法は2つあります。

#### a. テキストボックスに直接入力

「List of prompt inputs (Chunk String)」というラベルの付いたテキストボックスに、上記の「チャンク文字列フォーマット」に従ってプロンプトを直接入力します。

#### b. ファイルをアップロード

「Upload prompt inputs」というラベルの付いたファイルアップロードエリアに、チャンク文字列が記述されたテキストファイル（例: `.txt`, `.md`）をドラッグ＆ドロップまたは選択してアップロードします。

### 3. 画像生成の実行

プロンプトの入力が完了したら、通常通り「Generate」ボタンをクリックして画像を生成します。スクリプトは入力されたチャンク文字列を解析し、各チャンクから生成されたプロンプトを順番に処理して画像を生成します。

---
